<view class='map-body'>
<map 
  id='myMap'
  style='width: 100%; height: 500rpx; position: relative; z-index: 100'
  subkey='S2OBZ-SG3R3-XJE36-3WSVH-ND7NT-HIF5Y'
  longitude="{{longitude}}" 
  latitude="{{latitude}}"
  markers="{{markers}}"
  polyline="{{polyline}}"
  include-points='{{includePoints}}'
  bindmarkertap='markerTap'
  show-location
></map>
<swiper vertical='true' style='height: 100%'>
<swiper-item>
<view class='search-el'>
  <i-input 
      title='å…¬å¸åœ°å€'
      value='{{company}}'
      placeholder='è‹¥ä¸å†å…¬å¸å¯è¾“å…¥åœ°å€'
      type='text'
      maxlength='-1'
      bind:change='companyValueChange'
      i-class='search-address'
  ></i-input>
  
  <i-button 
    bind:click='searchCompany'
    i-class='search-button common-button'
  >æœç´¢</i-button>
</view>
<scroll-view  
  scroll-y 
  style="width: 100%" 
  class='search-result-container'
  animation='{{animationData}}'
  scroll-into-view='{{selectedMarkerId}}'
>
  <view 
    class='search-result-item ' 
    wx:for='{{resultPoints}}' 
    wx:key='{{item.id}}' 
    id='{{item.id}}' 
    data-lon="{{item.longitude}}"
    data-la="{{item.latitude}}"
    bindtap='observeWithMap'
  >
    <text class='search-result-index {{ selectedMarkerId === item.id ? "result-selected" : ""}}'>{{index + 1}}</text>
    <text class='search-result-title {{ selectedMarkerId === item.id ? "result-selected" : ""}}'>{{item.title}}</text>

  </view>
</scroll-view>
  <view class='current-terminal'>
    å½“å‰ç»ˆç‚¹ï¼š{{terminalText}}
  </view>
  <i-button 
    bind:click="fetchDistance"  
    data-lon='{{longitude}}' 
    data-la='{{latitude}}'
    i-class='common-button'
  >
    è·å–æˆ‘ä¸æ‚¨çš„è·ç¦»
  </i-button>

  <image 
    src='../../assets/images/moveToUp.png'
    class='evaluate-move-up {{evaluateResultVisible ? "move-up-trigger" : ""}}'
    wx:if='{{evaluateResultVisible}}'
  ></image>
  <view 
    wx:if='{{evaluateResultVisible}}'
    class='more-tip'
  >å‘ä¸Šæ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</view>


</swiper-item>

<swiper-item wx:if='{{evaluateResultVisible}}'>
  <view class='evaluate-result-container' >
    <view class='evaluate-emoji'>ç®€å•: ğŸ˜„ ï¼Œä¸€èˆ¬ï¼šğŸ™‚ ï¼Œå›°éš¾: â˜¹ï¸</view>
    <view class='evaluate-result-desc'>æˆ‘ä¸æ‚¨çš„è·ç¦»ï¼š{{distanceInfo.distance}} km {{distanceInfo.distanceScore}}</view>
    <view class='evaluate-result-desc'>æ‰€éœ€æ—¶é—´ï¼š{{distanceInfo.duration}} {{distanceInfo.durationSocre}}</view>
    <view class='evaluate-result-desc'>å‡ºè¡Œæ–¹å¼: {{distanceInfo.vehicleDes}} {{distanceInfo.vehicleScore}}</view>
  </view>
  <canvas 
    style='width: 100%; height: 300rpx;'
    canvas-id="pieChart"
  ></canvas>
</swiper-item>
</swiper>
</view>

